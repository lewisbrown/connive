#lang racket

; scoped macros
(~~ ??
  
  ; aux macro
  (~~ acc 
    
    ; patterns
    ((pair ...) pred res edge) (cond pair ... (pred res) (else edge))
    ((pair ...) pred res rest ...) (??-acc (pair ... (pred res)) rest ...))
  
  ; patterns
  (expr ...) (acc () expr ...))